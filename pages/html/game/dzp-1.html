<html xmlns="http://www.w3.org/1999/xhtml">
<head>

		<meta charset="UTF-8">
		<meta name="format-detection" content="telephone=no"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="format-detection" content="telephone=no"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

		<meta name="keywords" content="">
		<meta name="description" content="">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="renderer" content="webkit">
		<title>抽奖</title>

		<!--<script src="../../js/libs/jquery-2.1.1.min.js"></script>-->
		<script src="../../js/libs/zepto.min.js"></script>
		<!--frozenUI-->
		<link href="../../plugins/frozenui-1.3.0/css/frozen.css" rel="stylesheet">
		<script src="../../plugins/frozenui-1.3.0/js/frozen.js"></script>
		<!--公共css-->
		<link href="../../css/common.css" rel="stylesheet">
		<link href="../../css/font.css" rel="stylesheet">
		<link href="../../css/background.css" rel="stylesheet">
		<script src="../../js/map.js"></script>
		<!--大转盘-->
		<!--<link rel="stylesheet" type="text/css" href="../../css/game/reset.css">-->
		<script type="text/javascript" src="../../js/libs/jquery.rotate.min.js"></script>


</head>

<body>


<style>

		.bg_fbba03 {
				background-color: #fbba03;
		}

		.bg_fdeee6 {
				background-color: #fdeee6;
		}

		.bg_fd7b44 {
				background-color: #fd7a44;
		}

		.ui-icon-return {
				color: #fff;
				position: absolute;
				top: 5px;
				left: 5px;
		}

		.ui-icon-share {
				position: absolute;
				right: 5px;
				top: 5px;
				color: #fff;
		}

		.g-content {
				width: 100%;
				height: auto;
				margin: 20px auto;
				font-family: "微软雅黑", "microsoft yahei";
		}

		.g-content .g-lottery-case {
				width: 300px;
				height: 300px;
				margin: 0 auto;
				overflow: hidden;
		}

		.g-content .g-lottery-case .g-left h2 {
				font-size: 20px;
				line-height: 32px;
				font-weight: normal;
				margin-left: 20px;
		}

		.g-content .g-lottery-case .g-left {
				width: 100%;
				height: 100%;
				float: left;
		}

		.g-lottery-box {
				width: 100%;
				height: 100%;
				position: relative;
				background: url(../../image/lottery/ly-plate-c.gif) no-repeat;
				background-size: contain;
				padding: 30px;
		}

		.g-lottery-box .g-lottery-img {
				width: 100%;
				height: 100%;
				position: relative;
				background: url(../../image/lottery/bg-lottery.png) no-repeat;
				background-size: contain;
				float: left;
				padding: 50px;
		}

		.g-lottery-box .playbtn {
				display: block;
				width: 100%;
				height: 100%;
				position: relative;
				background: url(../../image/lottery/playbtn.png) no-repeat;
				background-size: contain;
		}

		.my_dream_pieces {
				background-color: #fbba03;
				padding: 8px 12px;
				border-radius: 30px;
				width: 150px;
				text-align: center;
				margin: 10px auto;
		}

		.prize_record_list .winner_name,
		.prize_record_list .prize_name {
				color: #fd7a44;
		}

		.game_rule_txt {
				/*display: block;*/
				width: 100px;
				padding: 5px 12px;
				text-align: center;
				border-radius: 30px;
				margin-bottom: 10px;
		}

		.game_rule_list {
				color: #666666;
		}
</style>

<section class="ui-container ui-content">

		<section class="mxep_block bg_fdeee6">

				<div class="ui-whitespace-15-25 ui-position-relative bg-fd7a44 ui-txt-white">

						<i class="ui-icon-return" onclick="history.back();"></i>
						<i class="ui-icon-share"></i>

						<div class="ui-txt-center ui-margin-b-30">梦想转盘</div>

						<div class="g-content dzp_container">
								<div class="g-lottery-case">
										<div class="g-left">
												<!--<h2>您已拥有<span class="playnum">0</span>次抽奖机会，点击立刻抽奖！~</h2>-->
												<div class="g-lottery-box">
														<div class="g-lottery-img">
																<a class="playbtn" href="javascript:;" title="开始抽奖"
																	 style="transform: rotate(300deg); transform-origin: 50% 50% 0px;"></a>
														</div>
												</div>
										</div>
								</div>
						</div>

						<div class="my_dream_pieces">
								我的梦想碎片
						</div>
				</div>

				<div class="pd-10-15 ui-position-relative ">

						<div class="prize_record_list_container">
								<div class="txt ui-txt-line-height-40 ui-txt-center bg_fbba03 ui-txt-white">近期中奖记录</div>

								<ul class="prize_record_list ui-txt-line-height-36 ui-txt-center bg_white">

										<li class="ui-border-b">
												<span>恭喜</span>
												<span class="winner_name">XXXXX</span>
												<span>获得</span>
												<span class="prize_name">食用油一瓶</span>
										</li>

										<li class="ui-border-b">
												<span>恭喜</span>
												<span class="winner_name">XXXXX</span>
												<span>获得</span>
												<span class="prize_name">食用油一瓶</span>
										</li>

										<li class="ui-border-b">
												<span>恭喜</span>
												<span class="winner_name">XXXXX</span>
												<span>获得</span>
												<span class="prize_name">食用油一瓶</span>
										</li>

								</ul>
						</div>

				</div>

				<div class="pd-10-15 ui-position-relative ">

						<div class="txt game_rule_txt bg_fd7b44 ui-txt-white">
								游戏规则
						</div>

						<ul class=" game_rule_list ui-txt-line-height-24 f14">

								<li>
										1.每次抽奖消耗500积分。
								</li>

								<li>
										2.用户平台，每天可以2次免费抽奖。
								</li>

								<li>
										3.中的积分，梦想币，立即充值到您的账户。
								</li>

								<li>
										4.获得一定的商品碎片，可以兑换实物商品，兑换后请与平台联系。
								</li>

						</ul>

				</div>


		</section>

</section>

<script>
		$(function () {
				var $btn = $('.playbtn');
				var playnum = 10; //初始次数，由后台传入
				var isture = 0;//初始状态 未执行

				//按钮点击 事件
				$btn.click(function () {
						if (isture) return; // 如果在执行就退出
						isture = true; // 标志为 在执行

						if (playnum <= 0) { //当抽奖次数为0的时候执行
								isture = false;
						}
						else { //还有次数就执行
								playnum = playnum - 1; //执行转盘了则次数减1
								if (playnum <= 0) {
										playnum = 0;
								}
								clickfunc();
						}

				});

				var clickfunc = function () {
						var data = [1, 2, 3, 4, 5, 6];
						//data为随机出来的结果，根据概率后的结果
						data = data[Math.floor(Math.random() * data.length)];

						var m = new Map();
						m.put('1', '恭喜您获得2000元理财金');
						m.put('2', '谢谢参与~再来一次吧~');
						m.put('3', '恭喜您获得5200元理财金');
						m.put('4', '恭喜您获得100元京东E卡，将在次日以短信形式下发到您的手机上，请注意查收!');
						m.put('5', '谢谢参与~再来一次吧~');
						m.put('6', '恭喜您获得1000元理财金!');

						var angle = (data - 1) * 60;
						rotateFunc(data, angle, m.get(data));

				};

				var rotateFunc = function (awards, angle, text) {
						isture = true;
						$btn.stopRotate();//停止转动
						$btn.rotate({
								angle: 0,
								duration: 5000, //旋转时间
								animateTo: angle + 2880, //让它根据得出来的结果加上1440度旋转
								callback: function () {
										isture = false; // 标志为 执行完毕
										console.log(text);


								}
						});
				};

				var el;
				$(".my_dream_pieces").click(function () {
//						el = $.tips({
//								content: '温馨提示内容',
//								stayTime: 2000,
//								type: "success"
//						});


				});

		});
</script>


</body>
</html>